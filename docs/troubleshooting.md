# Troubleshooting 

## I can't see any action running

**Did you install gitStream in your repo?**
Check that you see gitStream app on repository's Settings > GitHub apps:

![GitHub App installed](/screenshots/app_in_github.png)
In case you don't see it, visit the marketplace and install it for free: https://github.com/marketplace/gitstream-by-linearb

**Did you set the workflow files correctly?**
Check you have placed these 2 files in your repository, with these exact names: 

1. `.cm/gitstream.cm`
2. `.github/workflows/gitstream.yml`

These files need to be committed to the repository default branch (usually `master` or `main`).

Check that you see "gitStream workflow automation" on the Action section in your repository:

![GitHub action](/screenshots/github_pr_actions_section.png)

Next, if you see failed action, check out the details:

![GitHub action log](/screenshots/github_pr_actions_log.png)

## I have rules that should have blocked merge, but the PR can be merged still

For example, when using the [`set-required-approvals`](/automation-actions.md#set-required-approvals) 
action, gitStream can ensure the PR got enough approvals before it can be merged. gitStream does that 
by running as a check and marking the check conclusion as failed. In order for the PR to be blocked, gitStream should be set as a required check in the repo: [instructions here](/github-app-setup.md#Set-GitHub-repo-settings).

![Merge enabled](/screenshots/merge-enabled-example.png)

## I can't set gitStream as required check

In order for gitStream to be listed as a required check, it needs to be triggered at least once in that repo. First create a new PR so gitStream is triggered.

Check it under repository's Settings > Branches: 

![Branch protection rules](/screenshots/branch_protection_in_github.png)

![Required checks](/screenshots/required_checks_in_github.png)

## I don't want gitStream to run on PRs that was generated by a bot

You can edit the `.github/workflows/gitstream.yml` and uncomment the `if` line, you can edit and replace the bot name with the bot name you want to ignore (`dependabot[bot]` in the example below):

```yaml+jinja title=".github/workflows/gitstream.yml" hl_lines="5"
jobs:
  gitStream:
    timeout-minutes: 5
    # uncomment this condition, if you don't want any automation on dependabot PRs
    if: github.actor != 'dependabot[bot]'
    runs-on: ubuntu-latest
    name: gitStream workflow automation
    steps:
      - name: Evaluate Rules
        uses: linear-b/gitstream-github-action@v1
```

## gitStream fails and I don't understand why

gitStream check run can fail from different reasons, and these are shown in the check result. 

![Check failure](/screenshots/check_syntax_failure.png)

Clicking the `Details` button will show more information and context.

![Check error details](/screenshots/check_syntax_failure_details.png)


## gitStream fails with syntax error after adding new rules

**IntelliJ IDEA** has automatic code styling for YAML that can break the `.cm` syntax, check the following _Settings/Preferences | Editor | Code Style | YAML --> Spaces | Code braces_ and make sure it is unchecked.

![Intellij settings](/screenshots/intellij_settings_code_braces.png)

**VS Code** YAML plugin by Red Hat extension `[vscode-yaml](https://github.com/redhat-developer/vscode-yaml)` has automatic code styling for YAML that can break the `.cm` syntax, make sure you disable `bracketSpacing`
```json
{
    "yaml.format.bracketSpacing": false,
}
```

## Not here?

Create a new issue in the [project's issues](https://github.com/linear-b/gitstream/issues)
